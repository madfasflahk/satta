name: PR Notifications to Discord

on:
  pull_request:
    types: [opened, closed]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send PR Notification
        if: github.event.action == 'opened'
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d '{
                "content": "ðŸ†• A new PR has been opened in the repository: **${{ github.repository }}**\n\nðŸ”— [PR #${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})\nðŸ“„ Title: **${{ github.event.pull_request.title }}**\nðŸ‘¤ Opened by: **${{ github.event.pull_request.user.login }}**"
              }' ${{ secrets.DISCORD_WEBHOOK_URL }}

      - name: Send Merge Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d '{
                "content": "ðŸŽ‰ A PR has been merged into the **main** branch of the repository: **${{ github.repository }}**\n\nðŸ”— [PR #${{ github.event.pull_request.number }}](${{ github.event.pull_request.html_url }})\nðŸ“„ Title: **${{ github.event.pull_request.title }}**\nðŸ‘¤ Merged by: **${{ github.event.pull_request.merged_by.login }}**"
              }' ${{ secrets.DISCORD_WEBHOOK_URL }}
